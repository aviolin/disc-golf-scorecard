import{m as C,b as m,o as v,c as b,a as e,t as N,s as w,w as c,e as k,f as h,j as y,v as $,M as g,h as x,_ as V,p as D,i as U,x as M,y as E,k as I,g as f,F as B,z as P}from"./index-DrS47DCn.js";const S={class:"account-row"},F=e("label",{for:"displayname"},"Display name:",-1),O={__name:"AccountDisplayName",setup(u){var o;const{user:s,updateProfile:p}=C(),d=m(((o=s==null?void 0:s.value)==null?void 0:o.displayName)||""),t=m(!1),l=()=>{p(s.value,{displayName:d.value}).then(()=>{t.value=!1})};return(i,n)=>{var a;return v(),b("div",null,[e("div",S,[e("span",null,N(((a=w(s))==null?void 0:a.displayName)||"(none)"),1),e("button",{onClick:n[0]||(n[0]=c(r=>t.value=!0,["prevent"])),class:"btn btn-secondary btn-small"},"Change display name")]),t.value?(v(),k(g,{key:0,onClose:n[2]||(n[2]=r=>t.value=!1)},{default:h(()=>[e("form",null,[F,y(e("input",{type:"text",id:"displayname","onUpdate:modelValue":n[1]||(n[1]=r=>d.value=r)},null,512),[[$,d.value]]),e("button",{class:"btn btn-save btn-primary",onClick:c(l,["prevent"])},"Update Display Name")])]),_:1})):x("",!0)])}}},T={class:"account-row"},j=e("label",{for:"email"},"New email:",-1),z=e("label",{for:"password"},"Confirm your password:",-1),L={__name:"AccountEmail",setup(u){const{user:s,updateEmail:p,reauthenticate:d}=C(),t=m(""),l=m(""),o=m(!1),i=()=>{if(!l.value||!s.value||s.value.email===l.value){o.value=!1;return}d(t.value).then(()=>{p(s.value,l.value).then(()=>{o.value=!1}).catch(n=>{console.error("Error updating email: ",n)})}).catch(n=>{console.error("Error reauthenticating: ",n)})};return(n,a)=>{var r;return v(),b("div",null,[e("div",T,[e("span",null,N((r=w(s))==null?void 0:r.email),1),e("button",{onClick:a[0]||(a[0]=c(_=>o.value=!0,["prevent"])),class:"btn btn-secondary btn-small"},"Change email")]),o.value?(v(),k(g,{key:0,onClose:a[3]||(a[3]=_=>o.value=!1)},{default:h(()=>[e("form",null,[j,y(e("input",{type:"email",id:"email","onUpdate:modelValue":a[1]||(a[1]=_=>l.value=_)},null,512),[[$,l.value]]),z,y(e("input",{type:"password",id:"password","onUpdate:modelValue":a[2]||(a[2]=_=>t.value=_)},null,512),[[$,t.value]]),e("button",{class:"btn btn-save btn-primary",onClick:c(i,["prevent"])},"Update Email")])]),_:1})):x("",!0)])}}},W={class:"account-row"},q=e("span",null,"********",-1),G=e("label",{for:"password"},"Current password:",-1),H=e("label",{for:"newpassword"},"New password:",-1),J={__name:"AccountPassword",setup(u){const{user:s,updatePassword:p,reauthenticate:d}=C(),t=m(""),l=m(""),o=m(!1),i=()=>{if(!l.value||!t.value||!s.value){o.value=!1;return}d(t.value).then(()=>{p(s.value,l.value).then(()=>{o.value=!1})}).catch(n=>{console.error(n)})};return(n,a)=>(v(),b("div",null,[e("div",W,[q,e("button",{onClick:a[0]||(a[0]=c(r=>o.value=!0,["prevent"])),class:"btn btn-secondary btn-small"},"Change password")]),o.value?(v(),k(g,{key:0,onClose:a[3]||(a[3]=r=>o.value=!1)},{default:h(()=>[e("form",null,[G,y(e("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=r=>t.value=r)},null,512),[[$,t.value]]),H,y(e("input",{type:"password",id:"newpassword","onUpdate:modelValue":a[2]||(a[2]=r=>l.value=r)},null,512),[[$,l.value]]),e("button",{class:"btn btn-save btn-primary",onClick:c(i,["prevent"])},"Update Password")])]),_:1})):x("",!0)]))}},K=u=>(D("data-v-62e41b2b"),u=u(),U(),u),Q={class:"delete-button-wrapper"},R=K(()=>e("p",null,"Are you sure? This will delete your account.",-1)),X={class:"button-holder"},Y={__name:"AccountDelete",setup(u){const{user:s,logout:p,deleteUser:d}=C(),t=m(!1),l=()=>{d(s.value).then(()=>{p()})};return(o,i)=>(v(),b("div",Q,[e("button",{onClick:i[0]||(i[0]=c(n=>t.value=!0,["prevent"])),class:"btn btn-warn btn-small"},"Delete account"),t.value?(v(),k(g,{key:0,onClose:i[2]||(i[2]=n=>t.value=!1)},{default:h(()=>[e("form",null,[R,e("div",X,[e("button",{class:"btn btn-save btn-primary",onClick:i[1]||(i[1]=c(n=>t.value=!1,["prevent"]))},"Cancel"),e("button",{class:"btn btn-warn btn-primary",onClick:c(l,["prevent"])},"Delete")])])]),_:1})):x("",!0)]))}},Z=V(Y,[["__scopeId","data-v-62e41b2b"]]),A=u=>(D("data-v-6315b57b"),u=u(),U(),u),ee=A(()=>e("h1",null,"My account",-1)),te=A(()=>e("span",{class:"material-symbols-outlined"},"logout",-1)),ae={__name:"AccountView",setup(u){const{user:s,logout:p}=C();return M(()=>{s.value||E.push("/log-in")}),(d,t)=>(v(),b(B,null,[(v(),b("form",{class:"account container",key:w(s)},[ee,e("button",{onClick:t[0]||(t[0]=c((...l)=>w(p)&&w(p)(...l),["prevent"])),class:"btn btn-secondary btn-small"},[te,I(" Logout ")]),f(O),f(L),f(J),f(Z)])),f(P)],64))}},ne=V(ae,[["__scopeId","data-v-6315b57b"]]);export{ne as default};

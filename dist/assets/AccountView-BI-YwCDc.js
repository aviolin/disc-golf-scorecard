import{m as y,b as c,o as v,c as $,a as e,t as N,s as b,e as k,w as h,j as _,v as f,h as w,M as g,g as x,_ as V,p as D,i as U,x as E,y as I,k as M,f as C}from"./index-Dz09zd88.js";const B={class:"account-row"},P=e("label",{for:"displayname"},"Display name:",-1),S={__name:"AccountDisplayName",setup(u){var o;const{user:s,updateProfile:d}=y(),p=c(((o=s==null?void 0:s.value)==null?void 0:o.displayName)||""),t=c(!1),l=()=>{d(s.value,{displayName:p.value}).then(()=>{t.value=!1})};return(i,n)=>{var a;return v(),$("div",null,[e("div",B,[e("span",null,N(((a=b(s))==null?void 0:a.displayName)||"(none)"),1),e("button",{onClick:n[0]||(n[0]=r=>t.value=!0),class:"btn btn-secondary btn-small"},"Change display name")]),t.value?(v(),k(g,{key:0,onClose:n[2]||(n[2]=r=>t.value=!1)},{default:h(()=>[e("form",null,[P,_(e("input",{type:"text",id:"displayname","onUpdate:modelValue":n[1]||(n[1]=r=>p.value=r)},null,512),[[f,p.value]]),e("button",{class:"btn btn-save btn-primary",onClick:w(l,["prevent"])},"Update Display Name")])]),_:1})):x("",!0)])}}},O={class:"account-row"},T=e("label",{for:"email"},"New email:",-1),j=e("label",{for:"password"},"Confirm your password:",-1),F={__name:"AccountEmail",setup(u){const{user:s,updateEmail:d,reauthenticate:p}=y(),t=c(""),l=c(""),o=c(!1),i=()=>{if(!l.value||!s.value||s.value.email===l.value){o.value=!1;return}p(t.value).then(()=>{d(s.value,l.value).then(()=>{o.value=!1}).catch(n=>{console.error("Error updating email: ",n)})}).catch(n=>{console.error("Error reauthenticating: ",n)})};return(n,a)=>{var r;return v(),$("div",null,[e("div",O,[e("span",null,N((r=b(s))==null?void 0:r.email),1),e("button",{onClick:a[0]||(a[0]=m=>o.value=!0),class:"btn btn-secondary btn-small"},"Change email")]),o.value?(v(),k(g,{key:0,onClose:a[3]||(a[3]=m=>o.value=!1)},{default:h(()=>[e("form",null,[T,_(e("input",{type:"email",id:"email","onUpdate:modelValue":a[1]||(a[1]=m=>l.value=m)},null,512),[[f,l.value]]),j,_(e("input",{type:"password",id:"password","onUpdate:modelValue":a[2]||(a[2]=m=>t.value=m)},null,512),[[f,t.value]]),e("button",{class:"btn btn-save btn-primary",onClick:w(i,["prevent"])},"Update Email")])]),_:1})):x("",!0)])}}},L={class:"account-row"},W=e("span",null,"********",-1),q=e("label",{for:"password"},"Current password:",-1),z=e("label",{for:"newpassword"},"New password:",-1),G={__name:"AccountPassword",setup(u){const{user:s,updatePassword:d,reauthenticate:p}=y(),t=c(""),l=c(""),o=c(!1),i=()=>{if(!l.value||!t.value||!s.value){o.value=!1;return}p(t.value).then(()=>{d(s.value,l.value).then(()=>{o.value=!1})}).catch(n=>{console.error(n)})};return(n,a)=>(v(),$("div",null,[e("div",L,[W,e("button",{onClick:a[0]||(a[0]=r=>o.value=!0),class:"btn btn-secondary btn-small"},"Change password")]),o.value?(v(),k(g,{key:0,onClose:a[3]||(a[3]=r=>o.value=!1)},{default:h(()=>[e("form",null,[q,_(e("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=r=>t.value=r)},null,512),[[f,t.value]]),z,_(e("input",{type:"password",id:"newpassword","onUpdate:modelValue":a[2]||(a[2]=r=>l.value=r)},null,512),[[f,l.value]]),e("button",{class:"btn btn-save btn-primary",onClick:w(i,["prevent"])},"Update Password")])]),_:1})):x("",!0)]))}},H=u=>(D("data-v-4abf1197"),u=u(),U(),u),J={class:"delete-button-wrapper"},K=H(()=>e("p",null,"Are you sure? This will delete your account.",-1)),Q={class:"button-holder"},R={__name:"AccountDelete",setup(u){const{user:s,logout:d,deleteUser:p}=y(),t=c(!1),l=()=>{p(s.value).then(()=>{d()})};return(o,i)=>(v(),$("div",J,[e("button",{onClick:i[0]||(i[0]=n=>t.value=!0),class:"btn btn-warn btn-small"},"Delete account"),t.value?(v(),k(g,{key:0,onClose:i[2]||(i[2]=n=>t.value=!1)},{default:h(()=>[e("form",null,[K,e("div",Q,[e("button",{class:"btn btn-save btn-primary",onClick:i[1]||(i[1]=w(n=>t.value=!1,["prevent"]))},"Cancel"),e("button",{class:"btn btn-warn btn-primary",onClick:w(l,["prevent"])},"Delete")])])]),_:1})):x("",!0)]))}},X=V(R,[["__scopeId","data-v-4abf1197"]]),A=u=>(D("data-v-f08ae84e"),u=u(),U(),u),Y=A(()=>e("h1",null,"My account",-1)),Z=A(()=>e("span",{class:"material-symbols-outlined"},"logout",-1)),ee={__name:"AccountView",setup(u){const{user:s,logout:d}=y();return E(()=>{s.value||I.push("/log-in")}),(p,t)=>(v(),$("form",{class:"account container",key:b(s)},[Y,e("button",{onClick:t[0]||(t[0]=(...l)=>b(d)&&b(d)(...l)),class:"btn btn-secondary btn-small"},[Z,M(" Logout ")]),C(S),C(F),C(G),C(X)]))}},ae=V(ee,[["__scopeId","data-v-f08ae84e"]]);export{ae as default};

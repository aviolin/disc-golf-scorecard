import{m as y,b as v,o as m,c as $,a as e,t as N,s as _,w as c,e as k,f as h,j as f,v as w,M as g,h as x,_ as V,p as D,i as U,x as E,y as I,k as M,g as C}from"./index-CuK8lbMY.js";const B={class:"account-row"},P=e("label",{for:"displayname"},"Display name:",-1),S={__name:"AccountDisplayName",setup(u){var o;const{user:s,updateProfile:i}=y(),p=v(((o=s==null?void 0:s.value)==null?void 0:o.displayName)||""),t=v(!1),l=()=>{i(s.value,{displayName:p.value}).then(()=>{t.value=!1})};return(d,n)=>{var a;return m(),$("div",null,[e("div",B,[e("span",null,N(((a=_(s))==null?void 0:a.displayName)||"(none)"),1),e("button",{onClick:n[0]||(n[0]=c(r=>t.value=!0,["prevent"])),class:"btn btn-secondary btn-small"},"Change display name")]),t.value?(m(),k(g,{key:0,onClose:n[2]||(n[2]=r=>t.value=!1)},{default:h(()=>[e("form",null,[P,f(e("input",{type:"text",id:"displayname","onUpdate:modelValue":n[1]||(n[1]=r=>p.value=r)},null,512),[[w,p.value]]),e("button",{class:"btn btn-save btn-primary",onClick:c(l,["prevent"])},"Update Display Name")])]),_:1})):x("",!0)])}}},O={class:"account-row"},T=e("label",{for:"email"},"New email:",-1),j=e("label",{for:"password"},"Confirm your password:",-1),F={__name:"AccountEmail",setup(u){const{user:s,updateEmail:i,reauthenticate:p}=y(),t=v(""),l=v(""),o=v(!1),d=()=>{if(!l.value||!s.value||s.value.email===l.value){o.value=!1;return}p(t.value).then(()=>{i(s.value,l.value).then(()=>{o.value=!1}).catch(n=>{console.error("Error updating email: ",n)})}).catch(n=>{console.error("Error reauthenticating: ",n)})};return(n,a)=>{var r;return m(),$("div",null,[e("div",O,[e("span",null,N((r=_(s))==null?void 0:r.email),1),e("button",{onClick:a[0]||(a[0]=c(b=>o.value=!0,["prevent"])),class:"btn btn-secondary btn-small"},"Change email")]),o.value?(m(),k(g,{key:0,onClose:a[3]||(a[3]=b=>o.value=!1)},{default:h(()=>[e("form",null,[T,f(e("input",{type:"email",id:"email","onUpdate:modelValue":a[1]||(a[1]=b=>l.value=b)},null,512),[[w,l.value]]),j,f(e("input",{type:"password",id:"password","onUpdate:modelValue":a[2]||(a[2]=b=>t.value=b)},null,512),[[w,t.value]]),e("button",{class:"btn btn-save btn-primary",onClick:c(d,["prevent"])},"Update Email")])]),_:1})):x("",!0)])}}},L={class:"account-row"},W=e("span",null,"********",-1),q=e("label",{for:"password"},"Current password:",-1),z=e("label",{for:"newpassword"},"New password:",-1),G={__name:"AccountPassword",setup(u){const{user:s,updatePassword:i,reauthenticate:p}=y(),t=v(""),l=v(""),o=v(!1),d=()=>{if(!l.value||!t.value||!s.value){o.value=!1;return}p(t.value).then(()=>{i(s.value,l.value).then(()=>{o.value=!1})}).catch(n=>{console.error(n)})};return(n,a)=>(m(),$("div",null,[e("div",L,[W,e("button",{onClick:a[0]||(a[0]=c(r=>o.value=!0,["prevent"])),class:"btn btn-secondary btn-small"},"Change password")]),o.value?(m(),k(g,{key:0,onClose:a[3]||(a[3]=r=>o.value=!1)},{default:h(()=>[e("form",null,[q,f(e("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=r=>t.value=r)},null,512),[[w,t.value]]),z,f(e("input",{type:"password",id:"newpassword","onUpdate:modelValue":a[2]||(a[2]=r=>l.value=r)},null,512),[[w,l.value]]),e("button",{class:"btn btn-save btn-primary",onClick:c(d,["prevent"])},"Update Password")])]),_:1})):x("",!0)]))}},H=u=>(D("data-v-62e41b2b"),u=u(),U(),u),J={class:"delete-button-wrapper"},K=H(()=>e("p",null,"Are you sure? This will delete your account.",-1)),Q={class:"button-holder"},R={__name:"AccountDelete",setup(u){const{user:s,logout:i,deleteUser:p}=y(),t=v(!1),l=()=>{p(s.value).then(()=>{i()})};return(o,d)=>(m(),$("div",J,[e("button",{onClick:d[0]||(d[0]=c(n=>t.value=!0,["prevent"])),class:"btn btn-warn btn-small"},"Delete account"),t.value?(m(),k(g,{key:0,onClose:d[2]||(d[2]=n=>t.value=!1)},{default:h(()=>[e("form",null,[K,e("div",Q,[e("button",{class:"btn btn-save btn-primary",onClick:d[1]||(d[1]=c(n=>t.value=!1,["prevent"]))},"Cancel"),e("button",{class:"btn btn-warn btn-primary",onClick:c(l,["prevent"])},"Delete")])])]),_:1})):x("",!0)]))}},X=V(R,[["__scopeId","data-v-62e41b2b"]]),A=u=>(D("data-v-dd23911c"),u=u(),U(),u),Y=A(()=>e("h1",null,"My account",-1)),Z=A(()=>e("span",{class:"material-symbols-outlined"},"logout",-1)),ee={__name:"AccountView",setup(u){const{user:s,logout:i}=y();return E(()=>{s.value||I.push("/log-in")}),(p,t)=>(m(),$("form",{class:"account container",key:_(s)},[Y,e("button",{onClick:t[0]||(t[0]=c((...l)=>_(i)&&_(i)(...l),["prevent"])),class:"btn btn-secondary btn-small"},[Z,M(" Logout ")]),C(S),C(F),C(G),C(X)]))}},ae=V(ee,[["__scopeId","data-v-dd23911c"]]);export{ae as default};
